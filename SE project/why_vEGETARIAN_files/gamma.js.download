!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/.bootscripts/",n(n.s=181)}({137:function(e,t,n){"use strict";var r,i=function(){};try{r=window}catch(e){r={}}r.performance&&r.performance.mark?e.exports=r.performance:e.exports={getEntriesByName:i,mark:i,measure:i}},144:function(e,t,n){"use strict";e.exports=function(e){var t=(n=e,window[n]=window[n]||[],window[n]);var n;return new Promise(function(e,n){t.push(function(){e(this)})})}},163:function(e,t,n){var r;void 0===(r=function(){"use strict";return function(e){return e.replace(/^https?:\/\//,"").replace(/[:\/].*/,"").toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/\.blogspot(\.com?)?\.[a-z]{2,3}$/,".blogspot.com").replace(/^.*\.(gamepedia|wikia)(\.com?)?\.[a-z]{2,3}$/,"$1.com").split(".").slice(-3).join(".")}}.apply(t,[]))||(e.exports=r)},181:function(e,t,n){"use strict";var r=n(6),i=n(144),o=n(182),a=n(183);window.phxConfigQueue.push(function(){var e=window.GdprStatus,t=this.user.hasPremium(),s=new a({fetch:window.fetch,window:window}),u=this.features.isEnabled("use-mavenuid-demonitized")||this.features.isEnabled("use-mavenuid-demonetized"),c=window.document.location.hash&&-1!==window.document.location.hash.indexOf("phxAdvertisingDebug")?function(){var e=Array.prototype.slice.apply(arguments);e.unshift("%c[phxAdvertisingDebug]%c","font-weight:bold","font-weight:normal"),console.log.apply(console,e)}:void 0;e.isDemonetizedSafe().then(function(e){var a=!!u&&e;c&&(a||t)&&c(t?"ADS402 Premium":"ADS401 Demonetized"),r("phxAdvertisingQueue",new o({adServerPromise:i("phxAdServerQueue"),breakpointPromise:i("phxConfigQueue").then(function(e){return e.breakpoint.get()}),clientPageModelPromise:n(184),debugLog:c,demographics:s,document:window.document,forceAllSlotsEmpty:t||a,adAuctionPromise:i("phxAdAuctionQueue"),timedOutPageLoadPromise:window.getTimedOutPageLoadPromise(3e4)}))}),r("phxDemographicsQueue",s)})},182:function(e,t,n){"use strict";var r=n(8),i="is-empty",o="is-loaded",a=4,s=6,u="fixed_bottom",c="adhesion";function l(e,t,n,r){var l=this;l.pageId=t,l.config=n;var d=e.debugLog,f={},m={};function g(){return t===e.pageId}d("adServer.initPage");var h=e.adServerPromise.then(function(e){if(g())return e.initPage().then(function(){return d("adServer.initPage completed"),e});throw new Error("Page not current")});l.makeInitialAdCall=function(){var t;return e.adAuctionPromise.then(function(e){return t=e,e.getLatestResult()}).then(function(r){var i=[];return n.sizedSlots.forEach(function(t){e.resetAdSlot(t.id),t.model.deferLoad||i.push(t)}),n.outOfPageSlots&&n.outOfPageSlots.forEach(function(t){e.resetAdSlot(t.id),i.push(t)}),b(i,t,r)})},l.makeOutOfPageAdCall=function(){var t;return e.adAuctionPromise.then(function(e){return t=e,e.getLatestResult()}).then(function(e){return b(n.outOfPageSlots||[],t,e)})},l.makeDynamicAdCall=function(t,n){var r;return e.adAuctionPromise.then(function(e){return r=e,n.auctionId?e.getResultById(n.auctionId):e.getLatestResult()}).then(function(e){return b(n.slots,r,e)})},l.getSlotResult=function(e){return A(e)},l.close=function(){d("close page",t),Object.keys(m).map(function(e){m[e].reject(new Error("cancelled by navigation"))})};var p={},v={},P=!1,w=0;function b(i,o,f){if(e.forceAllSlotsEmpty)return d("all slots on page",t,"forced empty by configuration"),function(t){var n=t.map(function(t){var n=e.document.getElementById(t.id);return n?Promise.resolve({slotId:t.id,element:n,filled:!1,sizeCode:null}).then(function(e){return y(e),e}):Promise.reject(new Error("missing container element for ad "+t.id))});return Promise.all(n)}(i);var m=window.GdprStatus,b=[h,e.clientPageModelPromise,e.breakpointPromise,m.isApplicable(),m.countryCodeSafe(),r];return Promise.all(b).then(function(r){if(!g())return d("ignoring prereqs for defunct page",t),void Promise.reject("Page not current");var h=r[0],b=r[1],S=r[2],A=r[3];d("requesting for page",t,"slots with screenSize",S);var x={};A&&(x={donottrack:!0,gdprIsApplicable:!0,gdprIsConsentGivenPromise:m.waitForConsentValue().then(function(){return m.isConsentGivenForPurpose(m.PURPOSE_IDS.advertising)}),kuid:void 0,optout:!0});var O=Object.assign({},n.global.baseModel,b,x,o&&o.keyValues||{}),L=i.filter(function(e){return!e.screenSizes||-1!==e.screenSizes.indexOf(S)});e.hasAdhesionAndFixedBottomZone&&(L=function(t,n){if(p){var r=t.filter(function(e){var t=e.model.zone;return t!==c&&t!==u||(p[t]=e,n&&(v[t]=n.getMaxBidForAdUnit(e.id)),!1)});if(u in p&&c in p){var i=function(){w++;var e=l.config.global.config.expectedRefreshCount;return null==e&&(e=s),u in v?0===v[u]?u:u in v&&c in v?v[c]<=v[u]*Math.max(e-(w-1),1)?u:c:u:c}();if(r.push(p[i]),delete p[i],i===c){if(P=!0,p[u]){var o=e.document.getElementById(p[u].id);if(o){var a=o.closest("phoenix-ad");a&&a.parentElement.removeChild(a)}}p=void 0}}return r}return P&&(t=t.filter(function(e){return e.model.zone!==u})),t}(L,f)),(L=L.map(function(t){var r={};f&&(r=f.getSlotModelPropertiesForAdUnit(t.id));var i,o,s,u=e.document.getElementById(t.id);return u?{id:t.id,adUnitPath:t.adUnitPath,config:t.config,element:u,model:Object.assign({},t.model,(i=n.global.baseModel,o=t.model,s=Math.min(o.index,a),{zoneIndex:o.zone+"_"+s,siteZoneIndex:i.hostname+"_"+o.zone+"_"+s}),r)}:(console.warn("missing container element for ad",t.id),null)}).filter(function(e){return!!e})).forEach(function(t){var n;if(!t.model.isOutstream){var r=t.element.parentElement;if(r){var i='[data-ad-group="'+r.parentElement.getAttribute("data-ad-group")+'"]',o=e.document.querySelectorAll(i+".not-size-"+S),a={D:!0};for(n=0;n<o.length;n++){var s=o[n];["A","B","C"].forEach(function(e){s.classList.contains("not-size-"+e)||(a[e]=!0)}),s.parentElement.removeChild(s)}var u=e.document.querySelectorAll(i);for(n=0;n<u.length;n++)Object.keys(a).forEach(function(e){var t="not-size-"+e;u[n].classList.remove(t),r.classList.remove(t)})}}});var C=new Promise(function(e){if("visible"!==document.visibilityState){document.addEventListener("visibilitychange",function t(n){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e(!0))},!1)}else e(!0)});return C.then(function(){return d("adServer.requestAds",L),h.requestAds(n.global.config,O,L,f,C).then(function(e){return e.map(function(e){return e.then(function(e){return e&&y(e),e})})}).then(function(e){return Promise.all(e)})})})}function y(e){var t=e.element,n=e.filled,r=e.sizeCode,a=e.sizeDims,s=t.parentElement,u=s.parentElement;if(s.classList.remove("is-placeholder"),!n)return u.classList.add(i),s.classList.add(i),u.classList.remove(o),s.classList.remove(o),void S(e);u.classList.add(o),s.classList.add(o),u.classList.remove(i),s.classList.remove(i),t.setAttribute("data-ad-size",r);var c=u.getAttribute("data-class-rules");if(c){var l,d,f=JSON.parse(c);for(l=0;l<f.length;l++){var m=f[l];if(m.sizes&&-1!==m.sizes.indexOf(r)||m.sizes&&-1!==m.sizes.indexOf(a)||m.dimensions&&-1!==m.dimensions.indexOf(a))for(d=0;d<m.classes.length;d++)u.classList.add(m.classes[d]);else for(d=0;d<m.classes.length;d++)-1!==u.classList.contains(m.classes[d])&&u.classList.remove(m.classes[d])}}S(e)}function S(e){e.slotId&&(A(e.slotId),m[e.slotId]&&m[e.slotId].resolve(e))}function A(e){return f[e]||(f[e]=new Promise(function(t,n){m[e]={resolve:t,reject:n}}).then(function(t){return delete m[e],t},function(t){throw delete m[e],t})),f[e]}}e.exports=function(e){e=e||{},this.adServerPromise=e.adServerPromise,this.breakpointPromise=e.breakpointPromise,this.clientPageModelPromise=e.clientPageModelPromise,this.demographics=e.demographics,this.document=e.document,this.adAuctionPromise=e.adAuctionPromise,this.timedOutPageLoadPromise=e.timedOutPageLoadPromise,this.forceAllSlotsEmpty=!!e.forceAllSlotsEmpty,this.debugLog=e.debugLog||function(){};var t=this.debugLog;t("new Session with options",e);var n,i=this;i.pageId=0,i.dynamicCallId=0;var o,a=new Promise(function(e,t){n=e});i.beginPage=function(e){var a=++i.pageId,s=r("advertising:beginPage:"+a);function u(t){return e.sizedSlots.some(function(e){return e.model.zone===t})}return o&&o.close(),i.hasAdhesionAndFixedBottomZone=u("adhesion")&&u("fixed_bottom"),t("begin page",a,e),o=new l(i,a,e,i.timedOutPageLoadPromise),1===a&&n(),t("page",a,"initial ad call"),o.makeInitialAdCall().then(function(e){return t("page",a,"initial ad call result:",e),s.end(),e},function(e){return t("page",a,"initial ad call failed:",e),s.end(),Promise.reject(e)})},i.getPage=function(){return a.then(function(){return o})},i.getAdCallConfig=function(e,t){return Promise.all([i.adServerPromise,a]).then(function(n){var r=n[0],i=o.config.global.config;return r.getAdCallConfig(e,t,i)})},i.resetAdSlot=function(e){i.adServerPromise.then(function(t){t.resetAdSlot(e)})},i.dynamicCall=function(e){var n=++i.dynamicCallId;t("dynamic call",n,e);var s=r("advertising:dynamicCall:"+n);return a.then(function(){return o.makeDynamicAdCall(n,e).then(function(e){return t("dynamic call",n,"result:",e),s.end(),e})}).catch(function(e){return t("dynamic call",n,"failed:",e),s.end(),Promise.reject(e)})},i.getSlotResult=function(e){if(!o)throw new Error("cannot call getSlotResult before a page is active");return o.getSlotResult(e)},i.reloadAd=function(e,t){return i.getSlotResult(e.id).then(function(){return i.resetAdSlot(e.id),i.dynamicCall({slots:[e],auctionId:t})}).catch(function(t){console.warn(t),i.dynamicCall({slots:[e]})})}}},183:function(e,t,n){"use strict";var r=n(8),i=0,o=0;e.exports=function(e){var t,n,a=e.fetch,s=e.window,u=new Promise(function(e,t){n=e});this.init=function(e){e.addressableDemographics=e.addressableDemographics||{US:{},CA:{},GB:{}},n(e)},this.location=function(){return t||(t=a(function(e,t){var n,r=s.envShortName&&"PROD"!==s.envShortName?"https://dove.qa.saymedia.com":"https://dove.saymedia.com";if(t){var i=encodeURIComponent;n=Object.keys(t).map(function(e){return i(e)+"="+i(t[e])}).join("&")}return r+"/"+e+(n?"?"+n:"")}("user/location"),{credentials:"include"}).then(function(e){return e.json()})),t},this.implicit=function(e){var t=this,n=r("advertising.demographics.implicit:"+o++);return u.then(function(e){return t.location().catch(function(){return{}}).then(function(t){var n=t.country||"US";if(e.addressableDemographics.hasOwnProperty(n))return e.addressableDemographics[n];throw new Error(n+" is not a valid country code.")})}).then(function(e){return n.end(),e})},this.get=function(){var e=r("advertising.demographics.get:"+i++);return this.implicit().catch(function(){return null}).then(function(e){var t=e.shift();if(t)return t=Object.keys(t).reduce(function(e,n){return!0===t[n]&&(e[n]=!0),e},{}),Object.keys(t)}).then(function(t){return e.end(),t})}}},184:function(e,t,n){"use strict";var r=n(163);e.exports=Promise.resolve({referrer:function(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(t){e=document.referrer}if(e)return r(e)}()})},6:function(e,t,n){"use strict";e.exports=function(e,t){var n=window[e];if(window[e]={push:i},void 0!==n)for(var r=0;r<n.length;r++)i(n[r]);function i(e){t.then?t.then(function(n){t=n,e.call(t)}):e.call(t)}}},8:function(e,t,n){"use strict";var r=n(137),i=0;function o(){var e="phxMark:"+i++;return r.mark(e),e}e.exports=function(e){var t=o();return{end:function(){var n=o();r.measure(e,t,n);var i=r.getEntriesByName(e);if(i&&i.length)return i[i.length-1].duration}}}}});
//# sourceMappingURL=advertising.min.js.map